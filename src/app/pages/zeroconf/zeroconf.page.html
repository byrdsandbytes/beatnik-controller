<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>zeroconf</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">zeroconf</ion-title>
    </ion-toolbar>
  </ion-header>
</ion-content> -->



<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs/menu"></ion-back-button>
    </ion-buttons>
    <ion-title>Network Scanner</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="scanForServices()" *ngIf="!isScanning">
        <ion-icon slot="icon-only" name="scan-outline"></ion-icon>
      </ion-button>
      <ion-button (click)="stopScan()" *ngIf="isScanning">
        <ion-icon slot="icon-only" name="stop-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content>
  <!-- <ion-list>
    <ion-list-header>
      <ion-label>Discovered Devices</ion-label>
    </ion-list-header>

    <ion-item *ngFor="let device of foundDevices">
      <ion-label>
        <h2>{{ device.name }}</h2>
        <p>Host: {{ device.hostname }}</p>
        <p>IP: {{ device.ipv4Addresses[0] }}:{{ device.port }}</p>
      </ion-label>
    </ion-item>

    <ion-item *ngIf="isScanning && foundDevices.length === 0">
      <ion-label class="ion-text-center">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Scanning for devices...</p>
      </ion-label>
    </ion-item>
  </ion-list> -->

  <div *ngIf="(services$ | async) as services">
    <ion-list>
      <ion-list-header>
        Discovered Services ({{ services.length }})
      </ion-list-header>

      <ion-item *ngIf="services.length === 0 && isScanning">
        <ion-label>Searching for services...</ion-label>
      </ion-item>
      
      <ion-item *ngFor="let service of services">
        <ion-label>
          <h2>{{ service.hostname }}</h2>
          <p>{{ service.name }}</p>
          <p>{{ service.type }}</p>
          <p>{{ service.ipv4Addresses[0] }}:{{ service.port }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-item *ngIf="isScanning && services.length === 0">
      <ion-label class="ion-text-center">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Scanning for devices...</p>
      </ion-label>
    </ion-item>

    <ion-item *ngIf="!isScanning && services.length === 0">
      <ion-label class="ion-text-center">
        <p>No services found.</p>
      </ion-label>
    </ion-item>
  </div>
  <ion-button expand="full" (click)="scanForServices()">Scan for Services</ion-button>
</ion-content>